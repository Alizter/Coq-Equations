\section{Related Work}
\label{sec:related-work}

\subsection{Dependent pattern-matching}
The notions of dependent pattern-matching and coverage building were
first introduced by Coquand in its seminal article
\cite{coquand92baastad} and the initial \name{Alf} implementation.
It was studied in the context of an extension of the Calculus of
Constructions by Cornes \cite{CornesPhD} who
started the work on
inversion of dependent inductive types that was later refined and
expanded by McBride resulting in the design of \name{Oleg}
\cite{mcbride00dependently}. Subsequent work with McKinna and Goguen
around \Epigram
\cite{mcbride:concon,DBLP:journals/jfp/McBrideM04,DBLP:conf/birthday/GoguenMM06}
led to the compilation scheme for dependent pattern-matching definitions
which is also at the basis of \Equations. Using the alternative external approach,
Norell developed the \Agda 2 language \cite{norell:thesis}, an
implementation of Martin-LÃ¶f Type Theory that internalizes not only
Streicher's axiom K but also the injectivity of inductive types.
In a similar spirit, Barras {\it et al} \cite{conf/types/BarrasCGHS08}
propose to extend \Coq's primitive elimination rule to handle the
unification process.

\subsection{Recursion in type theory}

Our treatment of recursion is comparable to the \name{Function} tool by
Barthe {\it et al.} \cite{Barthe:2006gp} which supports well-founded
recursion and also generates an inductive graph and a functional
induction principle. Our implementation is however more robust as the
input program is sufficiently structured to give a complete procedure to
generate the graph, and more powerful in its handling of dependent
pattern-matching. 

Another powerful way to handle non-structural recursion in type theory
was developed by Bove et Capretta \cite{journals/mscs/BoveC05}. The
technique, based on the ability to first define the graph of a function
and delay the termination argument might now be adaptable in our
setting.

\subsection{Elaborations into type theory}
The \Program \cite{sozeau.thesis} extension of \Coq
which permits elaboration of \Coq programs by separating programming and
proving lacked the support for reasoning on definitions after the fact.
We hope to combine the subset coercions system of \Program inside 
\Equations to get the best of both tools.

The \Epigram language also incorporates ``views'' and the application of
arbitrary eliminators in programs alongside with the \coqdockw{with} construct
\cite{DBLP:journals/jfp/McBrideM04}. These extensions were not
considered here but do not require any radical change to our system.

\section{Conclusion}
\label{sec:conclusion}

We have presented a new tool for defining programs using
dependent-pattern matching in the \Coq system, automatically 
generating a supporting theory to ease post-hoc reasoning on them.
The system has a safe architecture, living entirely outside the
kernel and allowing easy extension thanks to its reliance on the
high-level tactic language and type classes constructs. It is an
important step towards a more robust, accessible and powerful user
interface to the calculus.

%%% Local Variables: 
%%% mode: latex
%%% TeX-PDF-mode: t
%%% TeX-master: "equations"
%%% End: 